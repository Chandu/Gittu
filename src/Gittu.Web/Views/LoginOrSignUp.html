<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" ng-app="gittuApp">
<!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Gittu</title>
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic,700italic" rel="stylesheet" type="text/css">
	<link href="http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700" rel="stylesheet" type="text/css">
	<link href="@Path['~/public/css/gittu.css']" rel='stylesheet' type='text/css'>
	<script src="@Path['~/public/js/modernizr.js']"></script>
</head>
<body>
	<!--[if lt IE 7]>
		<p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
	<![endif]-->
	<nav class="navbar navbar-fixed-top navbar-inverse" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#page-navbar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<a class="navbar-brand" href="@Path['~/']">Gittu</a>
		</div>
	</nav>

	<div class="container" id="login-signup-container">
		<div id="pg">
			<div class="row">
				<div class="col-md-3">
				</div>
				<div class="col-md-6">
					<ul class="nav nav-pills">
						<li class="active"><a href="#register" data-toggle="tab">Sign Up</a></li>
						<li><a href="#login"  data-toggle="tab">Login</a></li>
					</ul>
					<div class="tab-content">
						<div id="register" class="tab-pane active">
							<form role="form" action="@Path['~/account/register']" method="post" name="register-form" id="register-form">
								<div class="errors-pane hide">
								</div>
								<div class="form-group">
									<label for="emailAddress">Email address</label>
									<input type="email" class="form-control" name="emailAddress" placeholder="Enter email">
								</div>
								<div class="form-group">
									<label for="username">Username</label>
									<input type="text" class="form-control" name="username" placeholder="Enter Username">
								</div>
								<div class="form-group">
									<label for="password">Password</label>
									<input type="password" class="form-control" name="password" placeholder="Password">
								</div>
								<div class="form-group">
									<label for="confirmPassword">Confirm Password</label>
									<input type="password" class="form-control" name="confirmPassword" placeholder="Confirm Password">
								</div>
								<div class="checkbox">
									<label>
										<input type="checkbox"> I agree to <a href="#">Terms &amp; Conditions</a>.
									</label>

									<button type="submit" class="btn btn-default btn-primary pull-right">Submit</button>
								</div>
							</form>
						</div>
						<div id="login" class="tab-pane">
							<form role="form" action="@Path['~/account/login']" method="post" name="login-form" id="login-form">
								<div class="errors-pane hide">
								</div>
								<div class="form-group">
									<label for="username">Username</label><span class=""></span>
									<input type="text" class="form-control" name="username" placeholder="Enter Username">
								</div>
								<div class="form-group">
									<label for="password">Password</label>
									<input type="password" class="form-control" name="password" placeholder="Password">
								</div>
								<div class="checkbox">
									<label>
										<input type="checkbox"> Remember me.
									</label>
									<button type="submit" class="btn btn-default btn-primary pull-right">Submit</button>
								</div>
								
							</form>
						</div>			
					</div>
				</div>
				<div class="col-md-3"></div>
			</div>
			<div id="messages-pane">
				
			</div>
			
		</div>
	</div>
	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
	<script src="@Path['~/public/js/jquery.js']"></script>
	<script src="@Path['~/public/js/bootstrap.js']"></script>
	<script src="@Path['~/public/js/json3.js']"></script>
	<script src="@Path['~/public/js/plugins.js']"></script>
	<script type="text/javascript">
		$(function() {
			var submitForm = function submitForm($form) {
				var url = $form.attr('action');
				var postData = JSON.stringify($form.serializeObject());
				$("#errors-pane", $form).addClass('hide');
				$.ajax({
					url: url,
					data: postData,
					type: "POST",
					contentType: "application/json"

				}).done(function(data, textStatus, jqXhr){

				}).fail(function(jqXhr, textStatus, errorThrown){
					var errorData = JSON.parse(jqXhr.responseText);
					var $ul = $('<ul/>');
					var allMessages = _.chain(errorData.messages)
						.map(function(values, key){
							return values;
						}).flatten()
						.value();
					_.each(allMessages,  function(message){
						$ul.append($('<li/>', {
							text: message
						}));
					});
					$(".errors-pane", $form).empty().append($ul).removeClass('hide');
				}).complete(function(jqXhr, textStatus){

				});
			};

			$('#register-form, #login-form').on('submit', function(e){
				e.preventDefault();
				submitForm($(this));
			});
		});
	</script>
</body>
</html>